<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ファミリートーク</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="{{ url_for('static', filename='js/theme.js') }}" defer></script>
</head>
<body class="theme-orange">

    <header>
        <h1>ファミリートーク  
            <select id="theme-selector">
                <option value="theme-orange">オレンジ</option>
                <option value="theme-blue">ブルー</option>
                <option value="theme-pink">ピンク</option>
            </select>
        </h1>
    </header>

    <main>
        <!-- 投稿フォーム -->
        <div class="post-box">
            <textarea id="content" placeholder="メッセージを入力"></textarea>
            <button id="post-button">送信</button>
        </div>

        <!-- 投稿一覧 -->
        <div class="chat-box">
            {% for post in posts %}
            <div class="message">
                <strong>{{ post.poster }}</strong> {{ post.content }}
                <span class="timestamp">{{ post.timestamp.strftime('%Y.%m.%d %H:%M') }}</span>
            </div>
            {% endfor %}
        </div>
    </main>

    <script>
        // テーマ変更のイベントリスナー
        document.getElementById("theme-selector").addEventListener("change", function() {
            document.body.className = this.value;  // 選択したクラスを適用
            localStorage.setItem("theme", this.value);  // 選択を保存
        });

        // ページ読み込み時に保存されたテーマを適用
        window.onload = function() {
            const savedTheme = localStorage.getItem("theme");
            if (savedTheme) {
                document.body.className = savedTheme;
                document.getElementById("theme-selector").value = savedTheme;
            }
        };
    </script>

</body>
</html>
